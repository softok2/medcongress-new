{% extends "MedCongressApp/base.html"%}
{% load static %}
{% block titulo %}
Transaccion Exitosa
{%endblock%}
{% block contenido %}
<div class="congreso-modal modal fade" id="my" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="" method="POST">
                {% csrf_token %}

                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row mb-3">
                            <div class="col">
                                <h5 class="title">Entre su RFC</h5>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <input type="text"  id="rfc" name="rfc"  class="form-control" placeholder="RFC" required="" > 
                                
                            </div>
                            <div class="col">
                                <select name="cfdi" id="" class="form-select" placeholder="FCDI"">
                                    <option value="G03">G03 	Gastos en general.</option>
                                    <option value="D10">D10 	Pagos por servicios educativos (colegiaturas).</option>
                                
                                </select>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col">
                                <input type="text"   name="dir"  class="form-control" placeholder="Dirección a Facturar" required="" > 
                                
                            </div>
                        </div>          
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col d-flex justify-content-end">
                                <button type="submit" class="cta close-btn" id="enviar" style="margin-right: 10px;" >Descargar Factura</button>
                                <button type="button" class="cta close-btn" data-dismiss="modal">Cerrar</button>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        
        </div>
    </div>
</div>
<div class="modal fade" id="mydgfd" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Entre su RFC</h4>
            </div>
            <form action="" method="POST">
                {% csrf_token %}
            <div class="modal-body">
                
                <div class=" row ">
                    <div id="factura" class="col-md-6" >
                        <div class="form-group">
                            <label>RFC</label>

                            <input type="text" id="rfc" name="rfc">

                        </div>

                    </div>
                    <div id="" class="col-md-6" >
                        <div class="form-group">
                            <label>CFDI</label>
<select name="cfdi" id="" class="form-control">

    <option value="G03">G03 	Gastos en general.</option>
    <option value="D10">D10 	Pagos por servicios educativos (colegiaturas).</option>
</select>
                            

                        </div>

                    </div>

                </div>
                <div class=" row ">
                    <div id="" class="col-md-12" >
                        <div class="form-group">
                            <label>Dirección a Facturar</label>

                            <input type="text" id="" name="dir">

                        </div>

                    </div>
                    

                </div>
           
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-default" id="enviar" >Descargar Factura</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

            </div> </form>
        </div>
    </div>
</div>
<section ><section class="cuestionario-congreso">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <h2 class="section-title mb-4">Enhorabuena</h2>
                <h1 class="section-subtitle">"Ahora puede acceder a sus eventos comprados."</h1>
                <h6 class="descripcion"> El comprobante de pago han sido enviados al correo electrónico de su cuenta, en caso de cualquier incidente contactar a <a
                    href="mailto:soporte@medcongress.com.mx">soporte@medcongress.com.mx </a>"</h6>
            </div>
            
        </div>
    </div>
</section>
<section class="checkout-table">
    <div class="container-fluid">
        <div class="row">
            <div class="col px-5">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">no.</th>
                                <th scope="col">Evento</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Cat. de Pago</th>
                                <th scope="col">Precio</th>
                                <th scope="col">Cant</th>
                                <th scope="col">A Pagar</th>
                            </tr>
                        </thead>
                        <tbody>
                           
                            {%for ca in car.1 %}
                        <tr>
                            <td scope="row">{{forloop.counter}}</td>
                            <td>{{ca.tipo_evento}}</td>
                            <td>{{ca.nombre_congreso}}</td>
                            <td>{{ca.nombre_cat_pago}}</td>
                            <td>${{ca.precio}}</td>
                            <td>{{ca.cantidad}}</td>
                            <td>${{ca.pagar|floatformat:2}}</td>

                        </tr>
                        {%endfor%}
                        
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="row my-3">
            <div class="col px-5">
                <div class="cart-price d-flex justify-content-between">
                    <span class="ms-3">Total a Pagar</span>
                    <span class="me-5">${{car.0.cant|floatformat:2}} </span>
                </div>
            </div>
        </div>

        <div class="row" style="float: right;">
            <div class="col px-5" >
               
                <a  class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#my">Obtener Factura </a>
            </div>
        </div>
    </div>
</section>

{%endblock%}

{%block script%}
<script>
 $(document).ready(function () {
$('#enviar').on('click', function (event) {

valor=$("#rfc").val()
if (!valor.match(/[A-Z,Ñ,&]{3,4}[0-9]{2}[0-1][0-9][0-3][0-9][A-Z,0-9]?[A-Z,0-9]?[0-9,A-Z]?/))
 {
   alert("Esto no es un numero RFC");
return false;
}
});
});
</script>
{%endblock%}